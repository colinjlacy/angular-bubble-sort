angular.module("bubbleApp",[]).controller("bubbleCtrl",function(e,r,t){e.stepSort=function(){t.stepSort(e.numbers[e.active],e.numbers[e.active+1]).then(function(r){e.numbers[e.active]=r[0],e.numbers[e.active+1]=r[1],e.return=e.active,t.sortCheck(e.numbers).then(function(r){e.sorted=r,e.sorted&&e.playing&&e.stop()}),!e.sorted&&e.active<e.numbers.length-2?(e.active++,e.stepping=!0):e.active=0})},e.playSort=function(){e.playing=!0,e.runningTimer=setInterval(function(){e.stepSort()},200)},e.stop=function(){clearInterval(e.runningTimer),e.playing=!1}}).service("bubbleSrvc",function(e,r){return{getNumbers:function(){var t=r.defer();return e({method:"GET",url:"server/random.php"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise},stepSort:function(t,n){var o=r.defer();return e({method:"POST",url:"server/sort.php",data:[t,n]}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},sortCheck:function(t){var n=r.defer();return e({method:"POST",url:"server/check.php",data:t}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}});